# -*- coding: utf-8 -*-
"""
The gov issues and allocates ID numbers to specific farmers at the beginning 
of a fiscal year by estimating the number of ID tags each farmer will need in 
the year to reduce time lags between cattle birth and tag attachment.

Some ID beginning with “0” were assigned to cattle for model projects 
(proof-of-concept).

"""

def get_last_digit(ids: str):
    '''The last digit in the ID number for the cattle is calculated base don the first nine digits as a confirmation. We have replicated the formula used here'''
    odd_nums = []
    even_nums = [] 
    odd=True 
    for i in ids: 
        if odd: 
            odd_nums.append(int(i))
            odd=False
        else:
            even_nums.append(int(i))
            odd=True

    import numpy as np

    odd_sum = np.sum(np.array(odd_nums))
    even_sum = np.sum(np.array(even_nums))

    rem = ((odd_sum*3)+even_sum)%10
    last_digit = 10-rem

    if last_digit == 10: 
        last_digit=0

    return last_digit 

